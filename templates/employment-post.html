<!--
  templateType: blog_post
  isAvailableForNewContent: true
  label: Employment Post
-->
{% set template_css = '../../css/templates/blog.css' %}
{% extends './layouts/base.html' %}

{% block body %}

<main id="main-content" class="body-container-wrapper employment-body">
    <div class="body-container body-container--employment-post">
        <div class="content-wrapper">
            <article class="employment-post">
                <div class="employment-content">
                    <div class="breadcrumbs">
                        {% module "breadcrumbs" 
                            path="/first-theme-hs/modules/breadcrumbs",
                            offset=0,
                            width=12,
                            renamed_from_id=79382493240
                        %}
                    </div>
                    <h1 class="employment-title">
                        {{ content.name }}
                    </h1>
                    <div class="employment-descriotion">
                        {{ content.post_body }}
                    </div>
                </div>
                {% set rec_posts = blog_recent_posts("employment", 200) %}
                <div class="employment-form contact-form">
                    <h2>Apply for this position</h2>
                    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
                    <script>
                    hbspt.forms.create({
                        region: "na1",
                        portalId: "21636115",
                        formId: "56e8edfc-94f8-4e06-bd22-cd7fbd5833cf",
                        cssRequired: "",
                        cssClass: "custom-form",
                        submitButtonClass: 'button',
                        onFormReady: function($form){
                            var mySelect = $form.find('.hs-position select');
                            const myOptions = {
                                {% for rec_post in rec_posts %}
                                    '{{ rec_post.name }}' : '{{ rec_post.name }}'{% if not loop.last %},{% endif %}
                                {% endfor %}
                            };
                            Object.keys(myOptions).forEach(key => {
                                var opt = document.createElement('option');
                                opt.value = myOptions[key];
                                opt.innerHTML = key;
                                mySelect[0].appendChild(opt);
                            });
                        }
                    });
                    </script>
                </div>
            </article>
        </div>
    </div>
</main>
{% endblock body %}